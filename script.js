// Sample JSON data (as previously defined)
const allProgramData = {
    "Program1": {
        "notes": "Program 1 notes...",
        "domains": {
            "Domain1": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain3": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain4": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain5": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain6": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain7": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain8": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain9": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain10": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain100": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain1000": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },"Domain15": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawd": {
                        "id": "9oiawhfio1h23ihawd",
                        "title": "Test case 1 for domain1 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawf": {
                                "id": "aownfoiawfaownfoiawfaownfoiawf",
                                "title": "task 1 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbb": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbb",
                                "title": "task 2 for test case 1 for domain1 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            },
            "Domain2": {
                "notes": "Domain 2 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawdx": {
                        "id": "9oiawhfio1h23ihawdx",
                        "title": "Test case 1 for domain2 program1",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawfx": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfx",
                                "title": "task 1 for test case 1 for domain2 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbbx": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbbx",
                                "title": "task 2 for test case 1 for domain2 program1",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            }
        }
    },
    "Program2": {
        "notes": "Program 2 notes...",
        "domains": {
            "Domain2": {
                "notes": "Domain 1 notes...",
                "is_explored": false,
                "is_tested": false,
                "is_authenticated": true,
                "testcases": {
                    "9oiawhfio1h23ihawdy": {
                        "id": "9oiawhfio1h23ihawdy",
                        "title": "Test case 1 for domain2 program2",
                        "url": "https://target.com/blablaveeeeeeeeeryyyyyylooooooooooooooooooooong",
                        "notes": "notes for file upload general",
                        "done": true,
                        "tasks": {
                            "aownfoiawfaownfoiawfaownfoiawfy": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfy",
                                "title": "task 1 for Test case 1 for domain2 program2",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": false,
                                "notes": ""
                            },
                            "aownfoiawfaownfoiawfaownfoiawfbbbby": {
                                "id": "aownfoiawfaownfoiawfaownfoiawfbbbby",
                                "title": "task 2 for Test case 1 for domain2 program2",
                                "instructions": [
                                    "Do this on kali",
                                    "Command: feroxbuster"
                                ],
                                "done": true,
                                "notes": ""
                            }
                        }
                    }
                }
            }
        }
    }
};

function debounceNotes(func) {
    let debounceTimer;
    return function() {
        const context = this;
        const args = arguments;
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => func.apply(context, args), 200);
    };
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text)
        .then(() => {
            console.log('Text copied to clipboard');
        })
        .catch(err => {
            console.error('Failed to copy: ', err);
        });
}


// populate program dropdown menu
function populatePrograms() {
    const programDropdown = document.getElementById('programSelect');
    for (const program in allProgramData) {
        const option = document.createElement('option');
        option.value = program;
        option.text = program;
        programDropdown.appendChild(option);
    };
}

// runs on program selection to update checklist
function selectProgram() {
    const programDropdown = document.getElementById('programSelect');
    const programName = programDropdown.value;
    populateTestCases(programName)
    populateGeneralNotesProgram(programName)
    clearTestCaseChecklist();
}


function populateGeneralNotesProgram(programName) {
    const notes = allProgramData[programName]["notes"];
    eventListener = function() {
        allProgramData[programName]["notes"] = this.value;
    };
    populateGeneralNotes(programName, notes, eventListener);
}


function populateGeneralNotesDomain(programName, domain) {
    const notes = allProgramData[programName]["domains"][domain]["notes"];
    eventListener = function() {
        allProgramData[programName]["domains"][domain]["notes"] = this.value;
    };
    populateGeneralNotes(domain, notes, eventListener);
}

function populateGeneralNotes(noteTitle, notes, eventListener) {
    // update title
    document.getElementById('notesTitle').innerText = `${noteTitle} Notes`;
    // replace old note section with new one to destroy all old event listeners
    const noteSection = document.getElementById('generalNotes');
    const newNoteSection = noteSection.cloneNode(true);
    newNoteSection.addEventListener('input', debounceNotes(eventListener));
    newNoteSection.value = notes;
    document.getElementById('generalNotes').parentNode.replaceChild(newNoteSection, noteSection);
}

// returns a unique identifier for a domain that can be used as HTML class
function getDomainDivId(domain) {
    const hash = CryptoJS.MD5(domain).toString();
    const domainDivId = `test-domain-${hash}`;
    return domainDivId;
}

// populates test case checklist for a program
function populateTestCases(programName) {
    const allSubDomainData = allProgramData[programName]["domains"]
    const testCaseSection = document.getElementById('testCases');

    var testCaseDivs = [];
    for (const domain in allSubDomainData) {
        const domainDivId = getDomainDivId(domain);
        testCaseDivs.push(`<div class="test-domain" id="${domainDivId}" onclick="populateGeneralNotesDomain('${programName}', '${domain}')">${domain}</div>`);
        for (const testCaseId in allSubDomainData[domain]["testcases"]) {
            const testCaseTitle = allSubDomainData[domain]["testcases"][testCaseId]["title"];
            const testCaseUrl = allSubDomainData[domain]["testcases"][testCaseId]["url"];
            testCaseDivs.push(`<div class="test-case" id="test-case-${testCaseId}" onclick="selectTestCase('${programName}', '${domain}', '${testCaseId}')"><input type="checkbox" id="checkbox-${testCaseId}">${testCaseTitle}</div>`);
        }
    }

    // add divs to document
    const testCaseDivsJoined = testCaseDivs.join(' ');
    testCaseSection.innerHTML = `<h3 onclick=populateGeneralNotesProgram('${programName}')>Test Cases</h3>` + testCaseDivsJoined;

    // add done buttons and their actions
    for (const domain in allSubDomainData) {
        for (const testCaseId in allSubDomainData[domain]["testcases"]) {
            const testCaseDone = allSubDomainData[domain]["testcases"][testCaseId]["done"];
            document.getElementById(`checkbox-${testCaseId}`).checked = testCaseDone;
            document.getElementById(`checkbox-${testCaseId}`).addEventListener('change', function () {
                allSubDomainData[domain]["testcases"][testCaseId]["done"] = this.checked;
            });
        }
    }

}



function clearTestCaseChecklist() {
    document.querySelector('#checklistSection h3').innerHTML = `Select test case`;
    const checklistItemsSection = document.getElementById('checklistItems');
    checklistItemsSection.innerHTML = '';
}


function selectTestCase(programName, domain, testCaseId) {
    // insert title
    const testCaseData = allProgramData[programName]["domains"][domain]["testcases"][testCaseId];
    document.querySelector('#checklistSection h3').innerHTML = `Checklist for ${testCaseData["title"]} on <a href=${testCaseData["url"]} target="_blank">${testCaseData["url"]}</a>`;

    // Clear the checklistItems
    const checklistItemsSection = document.getElementById('checklistItems');
    checklistItemsSection.innerHTML = '';

    // Add general notes on testcase
    checklistItemsSection.innerHTML += `
    <div class="checklist-textarea">
        <textarea id=notes-${testCaseId}>${testCaseData["notes"]}</textarea>
    </div>`;

    document.getElementById(`notes-${testCaseId}`).addEventListener('input', debounceNotes(function() {
        allProgramData[programName]["domains"][domain]["testcases"][testCaseId]["notes"] = this.value;
    }));

    // Add the individual tasks
    for (taskId in testCaseData["tasks"]) {
        console.log(taskId);
        task = testCaseData["tasks"][taskId];
        taskTitle = task["title"];
        taskInstructions = task["instructions"];
        taskDone = task["done"];
        taskNotes = task["notes"];
        taskDiv = document.createElement('div');
        taskDiv.className = 'checklist-item';

        instructionHTML = '';
        taskInstructions.forEach((instruction, i) => {
            instructionHTML += `
            <div class="instruction">
            <pre id="pre-${taskId}-${i}">${instruction}
            <button class="copy-button" onclick="copyToClipboard('${instruction}')">📋</button>
            </pre>
            </div>
            `
        });

        taskDiv.innerHTML = `
            <details><summary><label>
                <input type="checkbox" id="checkbox-${taskId}}">
            </label>${taskTitle}</summary>
            ${instructionHTML}
            <textarea class="checklist-textarea" id="notes-${taskId}" placeholder="Notes...">${taskNotes}</textarea>
            </details>
        `;
        checklistItemsSection.appendChild(taskDiv);



        // check checkbox if task is done
        document.getElementById(`checkbox-${taskId}}`).checked = taskDone;
        document.getElementById(`checkbox-${taskId}}`).addEventListener('change', createUpdateTaskStatusHandler(programName, domain, testCaseId, taskId));
        document.getElementById(`notes-${taskId}`).addEventListener('input', debounceNotes(createUpdateTaskNotesHandler(programName, domain, testCaseId, taskId)));
    }
}

// closure pattern https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures
function createUpdateTaskStatusHandler(programName, domain, testCaseId, taskId) {
    return function() {
        allProgramData[programName]["domains"][domain]["testcases"][testCaseId]["tasks"][taskId]["done"] = this.checked;
    }
}

// closure pattern https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures
function createUpdateTaskNotesHandler(programName, domain, testCaseId, taskId) {
    return function() {
        allProgramData[programName]["domains"][domain]["testcases"][testCaseId]["tasks"][taskId]["notes"] = this.value;
    }
}


/*
TODO:
* import / export
*/





